<!DOCTYPE html>
<html>

  <head>
    <title>Embeddable map example</title>

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.ie.css" /><![endif]-->

    <style>
      html, body, #gtMap {
        margin: 0px;
        padding: 0px;
        height: 100%;
        width: 100%;
      }
    </style>
  </head>

  <body>

    <div id="gtMap"></div>

    <script src="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.js"></script>
    <script>
      (function() {

        var buildMap = function(mapConfig) {
          var map = L.map('gtMap').setView(mapConfig.center, mapConfig.zoom);
          map.attributionControl.setPrefix('');
          map.attributionControl.addAttribution(mapConfig.attribution);
          for(var i = 0; i < mapConfig.layers.length; i++) {
            if (mapConfig.layers[i].type === 'wms') {
              (new L.TileLayer.WMS(mapConfig.layers[i].url, mapConfig.layers[i].options)).addTo(map);
            } else {
              throw Error("Don't know how to create a map layer of type '"+mapConfig.layers[i].type+"'.");
            }
          }
        };

        buildMap({
          center: [-36.38106, 145.39937],
          zoom: 10,
          attribution: 'Greater Shepparton',
          layers: [
            {
              type: 'wms',
              url: 'http://basemap{s}.pozi.com/geoserver/wms',
              options: {
                subdomains: '1234',
                layers: 'VICMAP_CLASSIC:VicmapClassic',
                format: 'image/png',
                transparent: true
              }
            },
            {
              type: 'wms',
              url: 'http://shepparton.pozi.com/geoserver/wms',
              options: {
                layers: 'SHEPPARTON:gs_waste_collection_zone',
                format: 'image/png8',
                transparent: true
              }
            }
          ]
        });

      })();
    </script>

  </body>
</html>

